<!doctype html>
<html data-n-head-ssr>
  <head>
    <style>/*!
 * Agate by Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * ---------------------------------------------------------------
 *
 * #ade5fc
 * #a2fca2
 * #c6b4f0
 * #d36363
 * #fcc28c
 * #fc9b9b
 * #ffa
 * #fff
 * #333
 * #62c8f3
 * #888
 *
 */.hljs{display:block;overflow-x:auto;padding:.5em;background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:400}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style>

    <title>Integrating lazy loading into a ghost blog</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Freelance front-end web developer producing high quality work with an exceptional eye for detail. Mentor. Lover of JavaScript."><meta data-n-head="ssr" http-equiv="X-UA-Compatible" content="IE=edge"><meta data-n-head="ssr" name="robots" content="index,follow"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/images/favicon.png"><link data-n-head="ssr" rel="stylesheet" href="https://use.typekit.net/nsr0hmh.css"><link rel="preload" href="/assets/runtime.1d983f5003c90455bbd7.js" as="script"><link rel="preload" href="/assets/commons.app.9b8e70070b6a6432944d.js" as="script"><link rel="preload" href="/assets/vendors.app.720ffa06cb0e6079b736.js" as="script"><link rel="preload" href="/assets/app.c4062590b757532441f0.css" as="style"><link rel="preload" href="/assets/app.0f68b425b40ce6f65ff4.js" as="script"><link rel="preload" href="/assets/pages_blog__slug.47f00696213d57b781d9.css" as="style"><link rel="preload" href="/assets/pages_blog__slug.6bae1be9b614fafacc7c.js" as="script"><link rel="preload" href="/assets/13.638f02bd720eedb8867f.js" as="script"><link rel="stylesheet" href="/assets/app.c4062590b757532441f0.css"><link rel="stylesheet" href="/assets/pages_blog__slug.47f00696213d57b781d9.css">
    <script src="https://browser.sentry-cdn.com/4.6.1/bundle.min.js" crossorigin="anonymous"></script>
    <script>var isStaging=!1,isEnvProduction=!0;isEnvProduction&&!isStaging&&Sentry.init({dsn:"https://1049260bcb57442ebafa6890e89d1e5c@sentry.io/1395424"})</script>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div class="Page" data-v-903be534><div><div class="Overlay is-light" style="display:none" data-v-51641075><div data-v-51641075><div tabindex="0"></div> <div tabindex="1"></div> <div data-lock=""><button class="Overlay-close is-light" data-v-51641075><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="Overlay-closeIcon" data-v-51641075><path d="M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z" data-v-51641075></path></svg></button> <div class="FullscreenImageContainer"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="Image is-fullscreen" style="display:none"></div></div> <div tabindex="0"></div></div></div></div> <div class="BlogToolbar" data-v-3fd3d764 data-v-903be534><div style="transition:opacity .3s;opacity:0;pointer-events:none" data-v-3fd3d764><div data-v-3fd3d764><button title="Back to top" class="BlogToolbar-backToTop BlogToolbar-button" data-v-3fd3d764><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 328" data-v-3fd3d764><path d="M195.7 94.8c-3.1 3.1-8 3-11.3 0L110 28.4V313c0 4.4-3.6 8-8 8s-8-3.6-8-8V28.4L19.6 94.7c-3.4 2.9-8.1 3.2-11.2.1-3.1-3.1-3.3-8.5-.1-11.4 0 0 87-79.2 88-80S99.1 1 102 1s4.9 1.6 5.7 2.4 88 80 88 80c1.5 1.5 2.3 3.6 2.3 5.7s-.8 4.1-2.3 5.7z" data-v-3fd3d764></path></svg></button></div></div></div>  <div class="Page-inner"><div><header role="banner" data-page="TODO" class="SiteHeader is-collapsed is-floating" data-v-615814b4><div class="SiteHeader-background" data-v-615814b4></div> <div class="SiteHeader-container" data-v-615814b4><div class="Logo" data-v-615814b4><a href="/" class="Logo-link u-px6 is-active" data-v-615814b4><span data-v-615814b4>Anthony </span> <span data-v-615814b4>Koch</span></a></div> <nav role="navigation" class="SiteNav" data-v-615814b4><ul class="SiteNav-list" data-v-615814b4><li class="SiteNav-listItem" data-v-615814b4><a href="/#work" class="SiteNav-link" data-v-615814b4>
            Work
          </a></li> <li class="SiteNav-listItem" data-v-615814b4><a href="/blog" class="SiteNav-link /blog" data-v-615814b4>
            Blog
          </a></li> <li class="SiteNav-listItem" data-v-615814b4><a href="/contact" class="SiteNav-link" data-v-615814b4>
            Contact
          </a></li> <li class="SiteNav-listItem has-icon" data-v-615814b4><a href="https://github.com/anthonykoch?tab=repositories" target="_blank" rel="noopener noreferrer" class="SiteNav-iconLink is-github" data-v-615814b4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="margin-top:-1px" data-v-615814b4 data-v-615814b4><path d="M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9 1.4.3 2.6.4 3.8.4 8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1-8.4 1.9-15.9 2.7-22.6 2.7-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1 10.5 0 20-3.4 25.6-6 2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8 0 0 1.6-.5 5-.5 8.1 0 26.4 3.1 56.6 24.1 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 30.2-21 48.5-24.1 56.6-24.1 3.4 0 5 .5 5 .5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5 1.2 0 2.6-.1 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z" data-v-615814b4 data-v-615814b4></path></svg></a></li></ul></nav></div> <div class="SiteHeader-lower" data-v-615814b4></div></header> <div class="Page-content"> <article id="post" class="Post" data-v-903be534><div class="Post-container" data-v-903be534><div class="Post-headerBackground" data-v-903be534><header class="Post-header u-gutter" style="transition-delay:1s" data-v-903be534 data-v-903be534><h1 class="Post-title" data-v-903be534><a href="/blog/Integrating-lazy-loading-into-a-ghost-blog" data-v-903be534>
                Integrating lazy loading into a ghost blog
              </a></h1> <div class="u-mxauto" data-v-903be534><p class="PostMeta" data-v-903be534><span class="PostMeta-date" data-v-903be534>
                  March, 3 2020
                </span> <span class="PostMeta-author" data-v-903be534>
                  by Anthony Koch
                </span></p></div></header></div> <div class="Post-content" data-v-903be534><div data-v-903be534><div class="Post-body md" style="animation-delay:.3s" data-v-903be534><p>Lazy loading images doesn't come with Ghost out of the box, so if you want it then you have to figure out a solution yourself. Pretty much all of the solutions found online boil down to modifying the theme and the posts themselves. Modifying the theme isn't a big deal, but for the blog I was helping on, <a href="https://modernfertility.com/blog/">modernfertility.com/blog</a>, there were simply too many posts that modifying them was out of the picture.</p> <p>Finding a better solution for what we wanted was quite a journey, so before we go over the failed attempts and other potential options.</p> <h3 id="solutions-that-didnt-work"><a href="#solutions-that-didnt-work" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> Solutions that didn't work</h3> <h4 id="1-making-a-handlebars-helper"><a href="#1-making-a-handlebars-helper" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> 1. Making a handlebars helper</h4> <p>My first idea was to just wrap the entire page in a helper that would lazy-ify the images.</p> <pre data-lang="html" class="md-codeBlock hljs"><code class="hljs-inner md-codeBlockInner">{{#lazify}}
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>></span>some html<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>></span>
{{/lazyify}}
</code></pre> <p>However... how exactly does one even add a helper to ghost's core?</p> <p>Well, there's actually an undocumented plugin system built within ghost called an "app". You can register an app and add handlebars helpers or do whatever. There are examples of it in the ghost install itself. However, there are three issues with this solution:</p> <ol><li>Ghost doesn't seem to allow user defined apps. If you want to create an app, you have to add a folder to <code>current/core/frontend/apps</code>. Then add the name of the folder to the <code>apps.internal</code> array in a file called "overrides.json".</li> <li>Transforming a page with cheeriojs that uses an asynchronous helper will cause ghost to freeze indefinitely.</li> <li>Async helpers don't resolve before the helper is run, so there will be bits of html that won't be processed. That's no bueno. The point here is to change all the image tags on the page.</li></ol> <h4 id="2-modifying-the-markdown-parser"><a href="#2-modifying-the-markdown-parser" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> 2. Modifying the markdown parser</h4> <p>The plan here was to manually change the theme, and then write a markdown plugin to transform the images within a post. I was never able to figure out where the hell the markdown parsing was done within Ghost's core.</p> <h4 id="3-implement-cloudfare-html-rewriting"><a href="#3-implement-cloudfare-html-rewriting" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> 3. Implement cloudfare html rewriting</h4> <p>You can somehow hook up cloudflare to a website and rewrite the html. I almost like this solution, but apparently it wasn't possible with the setup we were using.</p> <p><a href="https://developers.cloudflare.com/workers/reference/apis/html-rewriter/">Cloudflare HTMLRewriter</a></p> <h3 id="the-actual-working-solution"><a href="#the-actual-working-solution" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> The actual working solution</h3> <p>The solution requires modifying a small part of 1 file in ghost's core. Basically, the express route handler is changed so that we can transform the html before it's sent. This means all images throughout the site are lazy loaded.</p> <pre data-lang="js" class="md-codeBlock hljs"><code class="hljs-inner md-codeBlockInner"><span class="hljs-keyword">const</span> {
  compose,
  getHtml,
  loadHtml,
  transformLazify,
} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../../../../../utils/lazyload'</span>)

<span class="hljs-keyword">const</span> transform = compose(
  <span class="hljs-function"><span class="hljs-params">html</span> =></span> loadHtml(html),
  transformLazify,
  getHtml,
)

<span class="hljs-comment">// ... bunch of stuff</span>

<span class="hljs-comment">/**
 * @description Helper function to finally render the data.
 * @param {Object} req
 * @param {Object} res
 * @param {Object} data
 */</span>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderer</span>(<span class="hljs-params">req, res, data</span>) </span>{
  <span class="hljs-comment">// Set response context</span>
  setContext(req, res, data)

  <span class="hljs-comment">// Set template</span>
  templates.setTemplate(req, res, data)

  debug(<span class="hljs-string">'Rendering template: '</span> + res._template + <span class="hljs-string">' for: '</span> + req.originalUrl)
  debug(<span class="hljs-string">'res.locals'</span>, res.locals)

  <span class="hljs-comment">// CASE: You can set the content type of the page in your routes.yaml file</span>
  <span class="hljs-keyword">if</span> (res.routerOptions && res.routerOptions.contentType) {
    <span class="hljs-keyword">if</span> (res.routerOptions.templates.indexOf(res._template) !== <span class="hljs-number">-1</span>) {
      res.type(res.routerOptions.contentType)
    }
  }

  <span class="hljs-comment">// Render Call</span>
  res.render(res._template, data, (err, html) => {
    <span class="hljs-keyword">if</span> (err) req.next(err)

    <span class="hljs-keyword">const</span> after = transform(html)

    res.send(after)
  })
}
</code></pre> <p>The <code>res.render</code> portion is the only part that has been modified. It's actually a very simple change. The majority of the transform code was put into a separate file.</p> <p>To create the transform function, you'll need to create a file lazyload.js (or call it whatever) inside the <code>current/</code> directory. We chose to put it in <code>current/utils/lazyload.js</code>. It can't be outside of the <code>current/</code> folder because node won't be able to require it.</p> <p>As for the actual content, our lazifying file does some extra stuff, but I've put the <a href="https://gist.github.com/anthonykoch/d7b84adcaa2be2412c14bb2b5de6cdb8">stripped down version of it into a gist</a>.</p> <div><div class="Aside"><div class="Aside-content"><div class="Aside-tag [ Tag is-absolute ]">Note</div>
      With the version of ghost as of this writing, cheeriojs is already installed, so you don't need to <code>npm i cheeriojs</code></div></div></div> <p>Lastly, we added a lazy loader to the frontend to actually load the images in. We went with <a href="https://www.npmjs.com/package/vanilla-lazyload">vanilla-lazyload</a> because it's simple to use and only <strong>6.5KB minified</strong>. The only thing I don't like is that it doesn't add a loaded class to background-image elements.</p> <h3 id="but-perf-tho"><a href="#but-perf-tho" aria-hidden="true" class="md-headingAnchor"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z"></path></svg></a> But perf tho?</h3> <p>A <code>console.time()</code> around the <code>transform(html)</code> bit measured an average of <strong>7ms</strong>. Not a super big deal, imo. We were doing a couple more things in our transform, so it should even be less than that. Perhaps if you had a large DOM, (maybe because of syntax highlighted code blocks or something), it could potentially be much higher.</p></div></div> <footer class="Post-footer u-gutter" data-v-903be534><h3 class="Post-footerTitle" data-v-903be534>More from the blog</h3> <ul class="PostsList" data-v-903be534><li class="is-active" data-v-903be534><a href="/blog/Integrating-lazy-loading-into-a-ghost-blog" disabled class="PostsList-link" data-v-903be534><time datetime="2020-03-04T00:00:00.000Z" data-v-903be534>
                  March, 3 2020
                </time> <span data-v-903be534>Integrating lazy loading into a ghost blog</span></a></li><li data-v-903be534><a href="/blog/image-compressors-compared" class="PostsList-link" data-v-903be534><time datetime="2019-02-06T00:00:00.000Z" data-v-903be534>
                  February, 5 2019
                </time> <span data-v-903be534>Image compressors compared</span></a></li><li data-v-903be534><a href="/blog/nextjs-impressions" class="PostsList-link" data-v-903be534><time datetime="2018-10-09T00:00:00.000Z" data-v-903be534>
                  October, 8 2018
                </time> <span data-v-903be534>NextJS Impressions</span></a></li><li data-v-903be534><a href="/blog/or-operator-gotcha" class="PostsList-link" data-v-903be534><time datetime="2018-08-29T00:00:00.000Z" data-v-903be534>
                  August, 28 2018
                </time> <span data-v-903be534>OR operator gotcha</span></a></li><li data-v-903be534><a href="/blog/use-normalize-css" class="PostsList-link" data-v-903be534><time datetime="2018-08-03T00:00:00.000Z" data-v-903be534>
                  August, 2 2018
                </time> <span data-v-903be534>Use normalize css</span></a></li><li data-v-903be534><a href="/blog/just-nuxt-things" class="PostsList-link" data-v-903be534><time datetime="2018-07-29T00:00:00.000Z" data-v-903be534>
                  July, 28 2018
                </time> <span data-v-903be534>Just Nuxt Things</span></a></li><li data-v-903be534><a href="/blog/understanding-javascript-prototypes" class="PostsList-link" data-v-903be534><time datetime="2016-01-21T00:00:00.000Z" data-v-903be534>
                  January, 20 2016
                </time> <span data-v-903be534>Understanding JavaScript Prototypes</span></a></li></ul></footer></div></div></article></div> <footer class="SiteFooter" data-v-e182cb6c><div class="SiteFooter-container" data-v-e182cb6c><div class="u-mt4u-mt0@lg u-lineHeight0 u-mr3 u-mr7@lg u-mb3 u-mb0@lg" data-v-e182cb6c><div class="text-1" data-v-e182cb6c>Social</div> <ul class="IconList u-justifyCenter" data-v-8eb30aaa data-v-e182cb6c><li class="IconList-item" data-v-8eb30aaa><a href="http://codepen.io/anthonykoch" title="Codepen" class="IconList-link is-codepen" data-v-8eb30aaa><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-v-8eb30aaa data-v-8eb30aaa><path d="M241.239 303.936c-15.322-10.357-30.742-20.569-46.062-30.93-2.03-1.373-3.43-1.472-5.502-.029l-38.871 26.154C181.966 319.905 244 361.317 244 361.317v-53.786c-.012-1.224-1.553-2.78-2.761-3.595zm-46.147-63.27c15.454-10.16 30.851-20.409 46.109-30.86 1.486-1.018 2.775-3.509 2.799-5.334v-51.706s-62.033 41.124-93.262 61.942c13.7 9.159 26.671 17.913 39.787 26.443 1.02.662 3.396.284 4.567-.485zm74.746-31.312a4521.517 4521.517 0 0 0 47.627 31.815c.916.604 2.92.602 3.839 0l39.751-26.467L268 152.484v53.35c.01 1.201.805 2.821 1.838 3.52zm-11.729 21.015c-1.21-.802-3.611-.528-4.743.168-4.817 2.962-9.463 6.203-14.164 9.355-8.248 5.53-25.356 17.023-25.356 17.023l38.842 25.865c1.748 1.157 4.436 1.22 6.26.111l39.014-25.993c.001 0-34.079-22.701-39.853-26.529zM141 237.116v39.609l29.622-19.838z" data-v-8eb30aaa data-v-8eb30aaa></path><path d="M256 32C132.288 32 32 132.288 32 256s100.288 224 224 224 224-100.288 224-224S379.712 32 256 32zm139 265.006c0 5.785-2.652 9.868-7.511 13.094a38019.909 38019.909 0 0 0-123.286 82.188c-5.854 3.918-11.174 3.754-16.984-.137-40.783-27.314-81.719-54.546-122.625-81.676-5.11-3.389-7.594-7.557-7.594-13.73v-79.729c0-6.141 2.521-10.332 7.624-13.716 40.906-27.13 81.939-54.363 122.724-81.676 5.818-3.896 11.094-4.007 16.938-.095a41090.004 41090.004 0 0 0 123.261 82.195c4.678 3.106 7.453 6.943 7.453 12.66v80.622z" data-v-8eb30aaa data-v-8eb30aaa></path><path d="M316.247 273.234a3826.352 3826.352 0 0 1-45.386 30.332c-2.412 1.588-2.888 3.318-2.861 6.189v51.346l93.039-62.004-38.527-25.882c-2.345-1.604-3.93-1.567-6.265.019zM370 276.676V237.06l-29.59 19.873z" data-v-8eb30aaa data-v-8eb30aaa></path></svg></a></li> <li class="IconList-item" data-v-8eb30aaa><a href="https://github.com/anthonykoch" title="Github" class="IconList-link is-github" data-v-8eb30aaa><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-v-8eb30aaa data-v-8eb30aaa><path d="M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9 1.4.3 2.6.4 3.8.4 8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1-8.4 1.9-15.9 2.7-22.6 2.7-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1 10.5 0 20-3.4 25.6-6 2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8 0 0 1.6-.5 5-.5 8.1 0 26.4 3.1 56.6 24.1 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 30.2-21 48.5-24.1 56.6-24.1 3.4 0 5 .5 5 .5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5 1.2 0 2.6-.1 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z" data-v-8eb30aaa data-v-8eb30aaa></path></svg></a></li> <li class="IconList-item" data-v-8eb30aaa><a href="https://twitter.com/anthkoch" title="Twitter" class="IconList-link is-twitter" data-v-8eb30aaa><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-v-8eb30aaa data-v-8eb30aaa><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z" data-v-8eb30aaa data-v-8eb30aaa></path></svg></a></li></ul></div> <div class="u-mr3 u-mr7@lg u-lineHeight0 u-mb3 u-mb0@lg" data-v-e182cb6c><div class="logo text-1" data-v-e182cb6c><span class="is-first" data-v-e182cb6c>Anthony</span> <span class="is-last" data-v-e182cb6c>Koch</span></div> <small class="Copyright text-2" data-v-e182cb6c><span class="u-inlineBlock Copyright-symbol" data-v-e182cb6c>©</span>
          2015-2020
        </small></div> <div class="u-mb3 u-mb0@lg u-lineHeight0" data-v-e182cb6c><div class="text-1" data-v-e182cb6c>Contact</div> <a href="mailto:hello@anthonykoch.com" class="text-2 is-link" data-v-e182cb6c>hello@anthonykoch.com</a></div></div></footer></div></div> </div></div></div><script>window.__NUXT__=function(e,t,o,a,s,r,i,n,h,u,l,d){return{layout:"default",data:[{slug:n}],fetch:[],error:null,state:{fullscreenImage:{isShowing:!1,attributes:{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}},posts:{allMeta:[{author:e,title:"Integrating lazy loading into a ghost blog",tags:["ghost","ghostjs","blog","performance",h],id:12,created_at:"2020-03-04T00:00:00.000Z",importBasename:"2020-03-04-Integrating-lazy-loading-into-a-ghost-blog",excerpt:"<p>Lazy loading images doesn't come with Ghost out of the box, so if you want it then you have to figure out a solution yourself. Pretty much all of the solutions found online boil down to modifying the theme and the posts themselves. Modifying the theme isn't a big deal, but for the blog I was helping on, <a href=\"https://modernfertility.com/blog/\">modernfertility.com/blog</a>, there were simply too many posts that modifying them was out of the picture.</p>\n<p>Finding a better solution for what we wanted was quite a journey, so before we go over the failed attempts and other potential options.</p>\n",humanized:{created_at:"March, 3 2020"},url:u,slug:n},{author:e,title:"Image compressors compared",tags:[l,d],id:11,created_at:"2019-02-06T00:00:00.000Z",importBasename:"2019-02-06-image-compressors-compared",excerpt:"<p>I recently saw a question on reddit asking what the best way to optimize images was. Everyone seemed to respond with a different answer, with some recommending apps, some websites, and others CLI utilities.</p>\n",humanized:{created_at:"February, 5 2019"},url:"/blog/image-compressors-compared",slug:"image-compressors-compared"},{author:e,title:"NextJS Impressions",tags:[l,d],id:10,created_at:"2018-10-09T00:00:00.000Z",importBasename:"2018-10-09-nextjs-impressions",excerpt:"<p>Server-Side Rendering (SSR) seems to be all the rage nowadays, so I'd thought I'd get in on the action by trying out <a href=\"https://nextjs.org\">NextJS</a>, which is a framework for writing SSR applications in React. Next allows rendering your React application pages to HTML on the server, meaning that users be able to see your application interface before React has even loaded into the browser.</p>\n",humanized:{created_at:"October, 8 2018"},url:"/blog/nextjs-impressions",slug:"nextjs-impressions"},{author:e,title:"OR operator gotcha",tags:["javascript","anti-patterns","operators"],id:9,skip:{section:"#the-gotcha"},created_at:"2018-08-29T00:00:00.000Z",importBasename:"2018-08-29-or-operator-gotcha",excerpt:"<p>It's become a common pattern in the JavaScript world to use the <code>||</code> (called the &quot;logical or&quot;) operator for the purpose of setting a default value for a function argument. While it works quite well in most cases, but there are two cases where troubles may arise.</p>\n",humanized:{created_at:"August, 28 2018"},url:"/blog/or-operator-gotcha",slug:"or-operator-gotcha"},{author:e,title:"Use normalize css",tags:["css","normalize"],id:8,created_at:"2018-08-03T00:00:00.000Z",importBasename:"2018-08-03-use-normalize-css",excerpt:"<p>To use <code>normalize.css</code> or to not use <code>normalize.css</code>. That is the question. I'll say that if you're supporting older browsers (especially IE), you should definitely be using it. However, before we get into why you should use it, let's go over what CSS resets are and how they differ from <code>normalize.css</code>.</p>\n",humanized:{created_at:"August, 2 2018"},url:"/blog/use-normalize-css",slug:"use-normalize-css"},{author:e,title:"Just Nuxt Things",tags:["nuxt","vue","webpack"],id:7,created_at:"2018-07-29T00:00:00.000Z",importBasename:"2018-07-29-just-nuxt-things",excerpt:'<p>I rewrote my website and blog using <a href="https://nuxtjs.org/">nuxt.js</a>. The experience did not come without a bit of blood, sweat, and tears, but I\'m happy with the end result. This is not so much a tutorial as it is a reflection on the experience and why I did what I did.</p>\n',humanized:{created_at:"July, 28 2018"},url:"/blog/just-nuxt-things",slug:"just-nuxt-things"},{author:e,title:"Understanding JavaScript Prototypes",tags:[s,"prototypes"],id:6,created_at:"2016-01-21T00:00:00.000Z",importBasename:"2016-01-21-understanding-javascript-prototypes",excerpt:"<p>Several months ago, I set out to get a deeper understanding of JavaScript, specifically in the area of prototypes. Prototypes were a fuzzy concept for me. I sort of knew how to use them, but didn't fully understand them. After a lot of study, I've started to see the picture of how prototypes work, and that they are not as complicated as I first thought.</p>\n",humanized:{created_at:"January, 20 2016"},url:"/blog/understanding-javascript-prototypes",slug:"understanding-javascript-prototypes"},{author:e,title:"Medium style image loading",tags:["stackblur","medium",h],id:5,created_at:"2016-01-07T00:00:00.000Z",importBasename:"2016-01-07-medium-style-images",excerpt:'<p>I was on the <a href="https://medium.com/">Medium</a> website and noticed a cool effect  they do when they lazy load their images. The image first appears blurry, and then slowly unblurs or fades out to reveal the actual image. I thought this was pretty cool, and wanted to see if I could achieve a similar effect.</p>\n',humanized:{created_at:"January, 6 2016"},url:"/blog/medium-style-images",slug:"medium-style-images"},{author:e,title:"Why you shouldn't loop arrays with for-in",tags:[s,"arrays"],id:4,created_at:"2015-12-03T00:00:00.000Z",importBasename:"2015-12-03-why-you-shouldnt-loop-arrays-with-for-in",excerpt:"<p>I had a friend ask me why you shouldn't iterate over arrays with a for-in loop, since after all, when he tried it everything worked as expected. Well, the reasoning for why you shouldn't do this is not immediately apparent, especially if you do not understand how property lookup and prototypes work.</p>\n",humanized:{created_at:"December, 2 2015"},url:"/blog/why-you-shouldnt-loop-arrays-with-for-in",slug:"why-you-shouldnt-loop-arrays-with-for-in"},{author:e,title:"Remember directories in Con Emu",tags:["con emu","command line"],id:3,created_at:"2015-11-15T00:00:00.000Z",importBasename:"2015-11-15-remember-directories-in-con-emu",excerpt:"<p>After an hour of research, trial, and error, I finally figured out how to get Con Emu to remember directories for tabs using Git Bash. When I first started using Con Emu, I swear it used to do this by default, but I guess updates in Con Emu or the Git Bash shell broke this feature. Either way, I've found a solution that worked for me to get this feature back.</p>\n",humanized:{created_at:"November, 14 2015"},url:"/blog/remember-directories-in-con-emu",slug:"remember-directories-in-con-emu"},{author:e,title:"The tools I use",tags:["development","tools"],id:2,created_at:"2015-08-21T00:00:00.000Z",importBasename:"2015-08-21-the-tools-i-use",excerpt:"<p>This is an overview of some of the development tools I've found useful, as well as some opinions and experiences I have had with them.</p>\n",humanized:{created_at:"August, 20 2015"},url:"/blog/the-tools-i-use",slug:"the-tools-i-use"},{author:e,title:"My favorite features of ES2015",tags:[s,"ES2015"],id:1,created_at:"2015-08-17T00:00:00.000Z",importBasename:"2015-08-17-favorite-features-of-ES2015",excerpt:"<p>ES2015, formerly called ES6, brings a lot of great features to JavaScript. A lot of the new features provide a much cleaner syntax for common tasks, and makes writing JavaScript so much better. After using these features for a while, I can't imagine going back to ES5. Here's an overview of my favorite features of ES2015.</p>\n",humanized:{created_at:"August, 16 2015"},url:"/blog/favorite-features-of-ES2015",slug:"favorite-features-of-ES2015"}]},projects:{all:[{title:"vue-scuffka",image:{url:"/assets/img/vue-scuffka.545938f0.png",size:{src:"/assets/vue-scuffka.png",width:r,height:900,bytes:31623,type:t,toString:{}}},icon:{xlinkHref:"icon-octocat"},fade:"white",href:"http://www.anthonykoch.com/vue-scuffka",id:"ck93ujbyh0000e8ut9uxbdgif"},{title:"Calculator",image:{url:"/assets/img/calculator.b6306cdb.png",size:{src:"/assets/calculator.png",width:i,height:600,bytes:75683,type:t,toString:{}}},icon:{xlinkHref:o},fade:a,hash:"xVQOwb",href:"http://codepen.io/anthonykoch/pen/xVQOwb",meta:{likes:207},id:"ck93ujbyh0001e8ut9k1t4p54"},{title:"Settings Page",image:{url:"/assets/img/settings.40eeba4c.png",size:{src:"/assets/settings.png",width:i,height:600,bytes:64718,type:t,toString:{}}},icon:{xlinkHref:o},fade:a,hash:"QjJaQv",href:"http://codepen.io/anthonykoch/pen/QjJaQv",meta:{likes:80},id:"ck93ujbyh0002e8ut3lk3b0qw"},{title:"Medium Image Loading",image:{url:"/assets/img/medium.481d2f04.png",size:{src:"/assets/medium.png",width:r,height:900,bytes:290136,type:t,toString:{}}},icon:{xlinkHref:o},fade:a,hash:"WrOQQz",href:"http://codepen.io/anthonykoch/pen/WrOQQz",meta:{likes:81},id:"ck93ujbyh0003e8ut1xyb2lwj"},{title:"Smart Home UI",image:{url:"/assets/img/smarthomeui.ed77829d.png",size:{src:"/assets/smarthomeui.png",width:i,height:600,bytes:45082,type:t,toString:{}}},icon:{xlinkHref:o},fade:a,hash:"GpQYrJ",href:"http://codepen.io/anthonykoch/pen/GpQYrJ",meta:{likes:50},id:"ck93ujbyh0004e8ut00b59jfe"},{title:"Social Connect",image:{url:"/assets/img/social-connect.c9aeb131.png",size:{src:"/assets/social-connect.png",width:r,height:900,bytes:46114,type:t,toString:{}}},icon:{xlinkHref:o},fade:a,hash:"MaQBrd",href:"http://codepen.io/anthonykoch/pen/MaQBrd",meta:{likes:55},id:"ck93ujbyh0005e8ut99w86m6k"}]}},serverRendered:!0,routePath:u}}("Anthony Koch","png","icon-codepen-outline","codepen","JavaScript",1600,1024,"Integrating-lazy-loading-into-a-ghost-blog","lazy loading","/blog/Integrating-lazy-loading-into-a-ghost-blog","nextjs","review")</script><script src="/assets/runtime.1d983f5003c90455bbd7.js" defer></script><script src="/assets/pages_blog__slug.6bae1be9b614fafacc7c.js" defer></script><script src="/assets/13.638f02bd720eedb8867f.js" defer></script><script src="/assets/commons.app.9b8e70070b6a6432944d.js" defer></script><script src="/assets/vendors.app.720ffa06cb0e6079b736.js" defer></script><script src="/assets/app.0f68b425b40ce6f65ff4.js" defer></script>

    <script>
      // Make sure codepen doesn't load before nuxt does
      setTimeout(function () {
        const script = document.createElement('script');

        script.src = 'https://static.codepen.io/assets/embed/ei.js';
        script.async = true;
        script.defer = true;

        document.body.appendChild(script);
      }, 1000)</script>
  </body>
</html>
