
$project-image-width: rem(580px)
$project-translate: 12%
$project-translate: 80px
$project-quote-margin-top: 60px

$codepen-border-radius: 3px
$codepen-projects-image-width: 500px
$codepen-projects-image-count: 6

.CodepenProjects
	background-color: hsla(0,0%,95%,1)
	border-top: 1px solid rgb(234, 233, 228)

.CodepenPreviewList
	display: flex
	flex-wrap: wrap
	justify-content: space-between
	opacity: 1
	padding: spacing(2) 0 spacing(1)
	transition: opacity 0.4s

.CodepenPreviewList__item
	$width: 400px
	border-radius: $codepen-border-radius
	flex: 0 0 auto
	line-height: 0
	max-width: $width
	padding: 0 0 double($base-spacing)
	width: 33.333333%

@media (max-width: 1300px)
	.CodepenPreviewList
		justify-content: center

	.CodepenPreviewList__item
		+padding(null half($base-gutter))
		flex: 0 0 50%
		max-width: 500px

	.CodepenPreviewList__item
		flex: 0 0 50%
		max-width: 500px

@media (max-width: 800px)
	.CodepenPreviewList__item
		+padding(null 0)
		flex: 100%
		max-width: 500px



/**
 * 1. Once a codepen project has been selected we will move it to the center
 * of the screen, but the thing needs to be position absolute first.
 *
 * 2. When the codepen preview is being selected (or previewed) we want to hide
 * the title and the dark hover overlay. The transition is changed to be longer
 * so the fade out is prolonged.
 *
 * 3. Shows the overlay and title when the project is hovered.
 */

.CodepenPreview
	border-radius: $codepen-border-radius
	cursor: pointer
	position: relative
	-webkit-tap-highlight-color: transparent
	transition: transform 0.4s
	width: 100%

	&.is-active .CodepenPreview__background
		opacity: 1

.CodepenPreview:hover,
.CodepenPreview:active
	.CodepenPreview__link:before
		opacity: 1 // [3]

.CodepenPreview:hover,
.CodepenPreview:active
	.CodepenPreview__title
		opacity: 1 // [3]
		transform: translate(-50.5%, -50%)

.CodepenPreview__container
	border-radius: inherit
	box-shadow: 0 rem(18px) rem(40px) rem(-12px) rgba(0,0,0,0.32)
	overflow: hidden
	padding-bottom: 56.25%
	position: relative

.CodepenPreview__background
	+fill
	background:
		color: #eeeeee
		position: center
		size: cover
	border-radius: inherit
	opacity: 0.95
	transition-duration: 0.5s
	transition-property: background

/**
 * TODO: Figure out what background looks best
 */
.CodepenPreview__link
	$transform: (-50%, -50%)
	+fill
	border-radius: inherit
	overflow: hidden
	transition-duration: 0.4s
	transition-property: background
	z-index: 2

	&:before
		+position(absolute, 0)
		background: rgba(color('background', 'dark'), 0.92)
	  border-radius: inherit
		content: ''
		opacity: 0
		transition-duration: 0.3s
		transition-property: background, opacity
		transition-timing-function: $ease-in-out-cubic

.CodepenPreview__icon
	border-radius: 50%
	display: inline-block
	fill: #eeeeee
	filter: drop-shadow(0 0 6px rgba(0,0,0, 0.3))
	padding: rem(7px) rem(5px)
	position: absolute
	z-index: 3

	> svg
		+size(26px)

.CodepenPreview__title
	+position(absolute, 50% null null 50%)
	backface-visibility: hidden
	border: rem(2px) solid rgba(white, 0.8)
	box-shadow: 0 rem(2px) rem(10px) 0 rgba(black, 0.1)
	color: rgba(white, 0.9)
	font-family: $heading-font-family
	font-size: rem(11px)
	letter-spacing: rem(2px)
	opacity: 0
	padding: rem(20px) rem(40px)
	text-shadow: 0 rem(1px) rem(8px) rgba(black, 0.3)
	text-transform: uppercase
	transform: translate(-50%, 0%)
	transition: transform 0.45s, opacity 0.45s
	user-select: none
	-webkit-font-smoothing: subpixel-antialiased
	white-space: nowrap
	z-index: 9



.Projects
	margin: 0 auto
	position: relative

/**
 * 1. This uses element is given a large amount of bottom padding because
 *    other elements will be translated up onto it.
 */
.Projects__header
	background-color: color('background', 'dark')
	min-height: rem(450px)
	padding: rem(100px) 0 rem(180px) /* [1] */
	position: relative

.Projects__header__quote,
.Project__quote
	color: #afafaf;
	font-size: rem(36px)
	font-style: italic
	font-weight: 300
	letter-spacing: rem(0.25px)
	line-height: 1.4

.Projects__header__quote
	left: $project-translate
	max-width: rem(400px)
	position: relative
	top: rem(120px)

	> span:last-child
		color: color('primary')

	> span:first-child
		color: #ababab



.ProjectList
	pass: pass

.ProjectList__item
	padding-bottom: spacing(3)
	position: relative

	&:last-of-type
		padding-bottom: 0



/**
 * Displays flex so that the details (title and caption) and image display side
 * by side.
 */

.Project
	pass: pass

.Project--first
	align-items: flex-start
	display: flex
	flex-wrap: wrap
	justify-content: center
	transform: translateY(rem(-220px))

.Project__media
	order: 2
	position: relative
	transform: translateX(negative($project-translate))

 /**
  * 1. Fix issue with IE rendering.
  */

.Project__image
	border-radius: $base-border-radius
	box-shadow: 0 rem(10px) rem(30px) rem(1px) rgba(black, 0.4)
	width: 100% // 1

.Project__details
	padding: 0 2rem 0 0

.Project__details--is-inside-first
	transform: translate($project-translate, rem(310px))

.Project__subtitle
	color: #bfbfbf
	font-family: $base-font-family
	font-size: rem(12px)
	font-weight: 400
	letter-spacing: rem(2px)
	margin-bottom: rem(5px)
	text-transform: uppercase

/**
 * Pushes away the title from the quote so that the quote is on the header and
 * the rest of the project details are on the white background.
 */

.Project__title
	align-items: center
	display: flex
	font-size: rem(22px)
	font-weight: 400
	letter-spacing: rem(1px)
	padding-bottom: half($base-spacing)

.Project__title__link
	$foreground: #333333
	$foreground--active: #ababab

	&:link,
	&:visited
		color: $foreground

	&:hover,
	&:active
		color: $foreground--active

.Project__icon
	line-height: 0
	margin-left: 0.5rem

	> svg
		+size(2rem)

.Project__description
	padding-bottom: rem(10px)

	& > p
		font-size: rem(15px)
		padding-bottom: 1.25rem

.Project__link
	display: inline-block



.ProjectOtherList
	display: flex
	flex-wrap: wrap
	padding-bottom: spacing(2)
	padding-top: spacing(2)
	width: 100%

.ProjectOtherList__item
	+padding(null spacing(1))
	flex: 1 0 auto
	width: 50%

.ProjectOtherTitle
	font-family: Lato
	font-size: rem(16px)
	font-weight: 500
	letter-spacing: 2px
	text-transform: uppercase

	a
		+link(('dark' 'underline'))



/**
 * 1. Removes `display: flex` which causes Project__media and Project__details
 *    to display: in two columns because of the max-width being applied.
 */

@media (max-width: breakpoint('xlarge'))

	$max-width: 500px

	.Projects__header__quote
		+position(relative, spacing(2) null null 0)
		+margin(null auto)
		text-align: center

	.Projects,
	.ProjectList__item
		margin-bottom: 0
		padding-bottom: 0

	.Project
		display: block // 1

	.Project--first
		transform: translateY(rem(-120px))

	.Project__media,
	.Project__details
		padding-right: 0
		transform: none

	.Project__media
		margin-left: auto
		margin-right: auto
		max-width: $max-width
		order: -1

	.Project__details
		margin-left: auto
		margin-right: auto
		margin-top: rem(40px)
		max-width: $max-width

	.Project__title-container
		text-align: center

	.Project__title
		justify-content: center



@media screen and (max-width: breakpoint('large'))

	.ProjectOtherList__item
		+row('medium')
		+padding(null 0)
		width: 100%



$br-sidebar-width: 200px
$br-input-border-color: rgba(black, 0.11)
$br-input-border: rem(1px) solid $br-input-border-color
$br-file-min-height: rem(60px)
$br-hover-gray: hsla(0, 0%, 0%, 0.04)

.br-App
	display: flex

.br-MainPane
	min-width: 100%
	width: 100%

.br-Inputs
	display: flex
	flex: 1 0 100%
	min-width: 100%
	width: 100%



.br-Sidebar
	background-color: color('background')
	min-width: rem($br-sidebar-width)
	overflow: visible
	position: relative
	width: rem($br-sidebar-width)
	z-index: $z-layer5

.br-SidebarList
	pass: pass

.br-SidebarList-item
	color: #eeeeee
	cursor: pointer
	font-size: rem(24px)
	line-height: rem(30px)
	position: relative

	&:last-of-type
		border-bottom: rem(1px) solid rgba(white, 0.03)

.br-SidebarButton
	+padding(rem(12px) spacing(0.75))
	background-color: color('background')
	border-left: rem(3px) solid rgba(black, 0)
	border-top: rem(1px) solid rgba(white, 0.02)
	box-shadow: 0 0 4px 0 rgba(black, 0.2)
	opacity: 1
	position: relative
	transition-property: border
	user-select: none
	z-index: $z-layer4

.br-SidebarButton-text
	display: inline-block
	font-size: rem(14px)
	line-height: rem(30px)
	vertical-align: middle

.br-SidebarButton-iconWrapper
	display: inline-block
	margin-right: rem(8px)
	text-align: center

.br-SidebarButton-icon
	display: inline-block
	min-width: rem(20px)
	vertical-align: middle

.br-SidebarList-item:hover .br-SidebarButton,
.br-SidebarButton--is-active,
.br-SidebarButton:hover,
.br-SidebarButton:active
	border-left-color: color('primary')

.br-SidebarList-item--newFile:hover .br-InputNewFile,
.br-SidebarList-item--newFile:active .br-InputNewFile
	opacity: 1
	transform: translateX(100%)



.br-FilesPane
	+size(100%)
	background-color: white
	border-right: $br-input-border
	border-top: $br-input-border
	position: absolute

.br-FilesPane--is-showing
	z-index: $z-layer3

.br-FilesList
	pass: pass

.br-FilesList-item
	position: relative
	z-index: 2

.br-FilesList-item:hover .br-File-actions
	opacity: 1



.br-File
	border-bottom: $br-input-border
	cursor: pointer
	display: flex
	justify-content: space-between

.br-File-name
	align-items: center
	color: #949188
	display: flex
	flex: 1 0 auto
	font-style: italic
	padding-left: rem(32px)
	position: relative

	&:hover
		background-color: $br-hover-gray

.br-File-actions
	align-items: center
	display: flex
	opacity: 0
	transition-duration: 0.15s
	transition-property: opacity
	user-select: none

.br-File-icon
	+size($br-file-min-height null)
	min-height: spacing(1.75)
	position: relative
	text-align: center
	transition-duration: 0.2s
	transition-property: background-color, box-shadow

.br-File-icon--delete
	border-left: $br-input-border
	border-right: $br-input-border
	box-shadow: inset 0 rem(4px) rem(16px) $transparent
	box-sizing: border-box
	font-size: rem(26px)
	text-shadow: 0 0 0 $transparent
	top: 0

	&:active .br-File-iconInner
		font-size: rem(20px)

	&:hover
		background-color: $bronze
		box-shadow: inset 0 rem(4px) rem(16px) rgba(black, 0.1)
		color: #ffffff
		text-shadow: rem(1px) rem(1px) rem(1px) rgba(black, 0.2)

	&:active
		box-shadow: inset 0 rem(4px) rem(20px) rgba(black, 0.35)

.br-File-icon--edit
	color: rgba(black, 0.5)
	font-size: rem(15px)

	&:active .br-File-iconInner
		font-size: rem(12px)

.br-File-iconInner
	+center
	transition-duration: 0.1s
	transition-property: font-size



.br-InputNewFile
	+input
	+padding(spacing(0.5) spacing(0.75))
	+position(absolute, 0 0 null null)
	border: rem(1px) solid #eeeeee
	border-bottom-left-radius: 0
	border-top-left-radius: 0
	box-shadow: 0 rem(4px) rem(10px) rem(-2px) rgba(black, 0.27)
	display: block
	height: 100%
	margin: 0
	transition-duration: 0.25s, 0.5s
	transition-property: transform, opacity
	width: rem(250px)
	z-index: $z-layer3

	&::placeholder
		color: #ababab
		font-size: 14px
		font-style: italic
		letter-spacing: 0.5px

.br-InputNewFile--is-showing
	transform: translateX(100%)



.br-Inputs-inputContainer,
.br-Inputs-outputContainer
	flex: 1 0 auto
	max-width: 50%
	position: relative
	width: 50%

.br-Inputs-field
	+input
	border: $br-input-border
	border-radius: 0
	font-family: $code-font-family
	font-size: rem(14px)
	height: 70vh
	line-height: 1.5
	margin: 0
	min-height: rem(400px)
	position: relative
	resize: none
	tab-size: 2
	width: 100%

	&:focus
		border-color: color('primary')

.br-Inputs-field--left
	z-index: $z-layer2

.br-Inputs-field--right
	margin-left: rem(-1px)

	&:focus
		border: rem(1px) solid #cccccc

.br-ErrorMessage
	+size(100% null)
	background-color: #eeeeee
	border: rem(1px) solid #dddddd
	bottom: 0
	display: none
	font-family: $code-font-family
	font-size: rem(12px)
	left: 0
	line-height: 1.4
	padding: spacing(0.25)
	position: absolute
	white-space: pre-wrap

.br-ErrorMessage--is-showing
	display: block



@media (max-width: breakpoint('large'))

	.br-App
		display: block

	.br-Sidebar
		+size(100% auto)

	.br-SidebarList
		display: flex

	.br-SidebarList-item
		flex: 1 0 auto
		white-space: nowrap
		width: 25%

		&:last-child
			border-bottom: 0

	.br-SidebarList-item--newFile:hover .br-InputNewFile,
	.br-SidebarList-item--newFile:active .br-InputNewFile
		transform: translateY(100%)

	.br-SidebarButton
		text-overflow: ellipsis

	.br-InputNewFile
		left: 0

	.br-SidebarButton
		border: 0
		border-top: rem(3px) solid $transparent
		text-align: center

		&:hover
			border-top-color: color('primary')

	.br-SidebarButton-iconWrapper
		margin-right: 0

	.br-SidebarButton-text
		font-size: rem(13px)

	.br-Inputs-field
		min-height: rem(300px)
		width: 100%

	.br-FilesPane
		border-top: 0

	.br-Inputs-field
		height: auto



@media (max-width: rem(600px))

	.br-Inputs
		display: block

	.br-Inputs-inputContainer,
	.br-Inputs-outputContainer
		max-width: 100%
		position: relative
		width: 100%



@media (max-width: rem(550px))

	.br-SidebarList-item
		border-bottom: 0

	.br-SidebarButton-text
		display: none
